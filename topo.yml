name: nsp_clab
mgmt:
  bridge: br-vlan17
  network: nsp_clab_mgmt
  ipv4-subnet: 10.2.17.0/24
  ipv4-gw: 10.2.17.1
topology:
  kinds:
    vr-sros:
      image: vrnetlab/vr-sros:23.3.R3
      license: license-sros23.txt
    srl:
      image: ghcr.io/nokia/srlinux   
      type: ixrd3 
  nodes:
    VSR-NRC-01:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.20
      license: license-vsrnrc.txt  
# main 6 nodes
    R1:      
      kind: vr-sros
      mgmt-ipv4: 10.2.17.9
      startup-config: startup-configs/nsp-sros-R1.cfg
    R2:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.2
      startup-config: startup-configs/nsp-sros-R2.cfg      
    R3:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.3
      startup-config: startup-configs/nsp-sros-R3.cfg       
    R4:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.4
      startup-config: startup-configs/nsp-sros-R4.cfg       
    R5:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.5
      startup-config: startup-configs/nsp-sros-R5.cfg       
    R6:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.6
      startup-config: startup-configs/nsp-sros-R6.cfg       
    R7:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.7
# area 1 - Core
    R11:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.11
      startup-config: startup-configs/nsp-sros-R11.cfg       

    R12:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.12
      startup-config: startup-configs/nsp-sros-R12.cfg       
# area 2
    R21:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.21
      startup-config: startup-configs/nsp-sros-R21.cfg       
    R22:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.22 
      startup-config: startup-configs/nsp-sros-R22.cfg       
# area 3
    R31:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.31
      startup-config: startup-configs/nsp-sros-R31.cfg       
    R32:
      kind: vr-sros
      mgmt-ipv4: 10.2.17.32      
      startup-config: startup-configs/nsp-sros-R32.cfg       

# DC Network nodes
    LEAF-DC-1:
      kind: srl
      mgmt-ipv4: 10.2.17.121 
      startup-config: startup-configs/nsp-srlinux-LEAF-DC-1.json
    LEAF-DC-2:
      kind: srl
      mgmt-ipv4: 10.2.17.122      
      startup-config: startup-configs/nsp-srlinux-LEAF-DC-2.json         
    SPINE-DC-1:
      kind: srl
      mgmt-ipv4: 10.2.17.123 
      startup-config: startup-configs/nsp-srlinux-SPINE-DC-1.json      
    SPINE-DC-2:
      kind: srl
      mgmt-ipv4: 10.2.17.124 
      startup-config: startup-configs/nsp-srlinux-SPINE-DC-2.json      
    BORDER-DC:
      kind: srl
      mgmt-ipv4: 10.2.17.125 
      startup-config: startup-configs/nsp-srlinux-BORDER-DC.json      

# Edge 1 Network nodes
    LEAF-E1-1:
      kind: srl
      mgmt-ipv4: 10.2.17.131 
      startup-config: startup-configs/nsp-srlinux-LEAF-E1-1.json       

# Edge 2 Network nodes
    LEAF-E2-1:
      kind: srl
      mgmt-ipv4: 10.2.17.141 
      startup-config: startup-configs/nsp-srlinux-LEAF-E2-1.json       
# bridge to VSR-NRC
  
  # bridge for TWAMP-LINK-R2-R4
    R2-R4:
      kind: bridge

  # bridge for TWAMP-LINK-R3-R5
    R3-R5:     
      kind: bridge

  links:
  # Transport R2-R4 links:
    - endpoints: ["R4:eth4", "R2:eth4"]
    
    # Transport Area 1 connections
    - endpoints: ["R1:eth2", "R11:eth2"]
      vars:
        port: [1/1/c2/1, 1/1/c2/1]
    - endpoints: ["R1:eth1", "R12:eth1"]
      vars:
        port: [1/1/c1/1, 1/1/c1/1]
    - endpoints: ["R11:eth1", "R2:eth1"]
      vars:
        port: [1/1/c1/1, 1/1/c1/1]
    - endpoints: ["R11:eth3", "R12:eth4"]
      vars:
        port: [1/1/c3/1, 1/1/c4/1]
    - endpoints: ["R12:eth2", "R3:eth1"]
      vars:
        port: [1/1/c2/1, 1/1/c1/1]

    # Transport inter ABR links
    - endpoints: ["R2:eth3", "R3:eth3"]
      vars:
        port: [1/1/c3/1, 1/1/c3/1]
    - endpoints: ["R4:eth3", "R5:eth3"]
      vars:
        port: [1/1/c3/1, 1/1/c3/1]

    # Transport Core area
    - endpoints: ["R2:eth2", "R21:eth1"]
      vars:
        port: [1/1/c2/1, 1/1/c1/1]
    - endpoints: ["R3:eth2", "R22:eth1"]
      vars:
        port: [1/1/c2/1, 1/1/c1/1]
    - endpoints: ["R5:eth2", "R22:eth2"]
      vars:
        port: [1/1/c2/1, 1/1/c2/1]
    - endpoints: ["R4:eth2", "R21:eth3"]
      vars:
        port: [1/1/c2/1, 1/1/c3/1]
    - endpoints: ["R21:eth4", "R22:eth4"]
      vars:
        port: [1/1/c4/1, 1/1/c4/1]
    - endpoints: ["R3:eth5", "R3-R5:eth1"]
    - endpoints: ["R5:eth5", "R3-R5:eth2"]
    - endpoints: ["R2:eth5", "R2-R4:eth3"]  
    - endpoints: ["R4:eth5", "R2-R4:eth4"]

    # Transport area-3
    - endpoints: ["R4:eth1", "R31:eth1"]
      vars:
        port: [1/1/c1/1, 1/1/c1/1]
    - endpoints: ["R5:eth1", "R32:eth1"]
      vars:
        port: [1/1/c1/1, 1/1/c1/1]
    - endpoints: ["R6:eth2", "R31:eth2"]
      vars:
        port: [1/1/c2/1, 1/1/c2/1]
    - endpoints: ["R7:eth2", "R31:eth3"]
      vars:
        port: [1/1/c2/1, 1/1/c3/1]
    - endpoints: ["R31:eth4", "R32:eth4"]
      vars:
        port: [1/1/c4/1, 1/1/c4/1]
    - endpoints: ["R32:eth3", "R6:eth1"]
      vars:
        port: [1/1/c3/1, 1/1/c1/1]
    - endpoints: ["R32:eth2", "R7:eth1"]
      vars:
        port: [1/1/c2/1, 1/1/c1/1]

# PCE VSR NRC

    - endpoints: ["R11:eth4","VSR-NRC-01:eth1"] 
      vars:
        port: [1/1/c4/1, 1/1/c1/1]
    - endpoints: ["R21:eth2","VSR-NRC-01:eth2"] 
      vars:
        port: [1/1/c2/1, 1/1/c2/1]  
    - endpoints: ["R31:eth5","VSR-NRC-01:eth3"] 
      vars:
        port: [1/1/c5/1, 1/1/c3/1]                 

# Datacenter
    # leaf <-> spine1 connections
    - endpoints: ["LEAF-DC-1:e1-1", "SPINE-DC-1:e1-1"]
    - endpoints: ["LEAF-DC-2:e1-1", "SPINE-DC-1:e1-2"]
    - endpoints: ["BORDER-DC:e1-1", "SPINE-DC-1:e1-10"]

    # leaf <-> spine2 connections
    - endpoints: ["LEAF-DC-1:e1-2", "SPINE-DC-2:e1-1"]
    - endpoints: ["LEAF-DC-2:e1-2", "SPINE-DC-2:e1-2"]
    - endpoints: ["BORDER-DC:e1-2", "SPINE-DC-2:e1-10"]

# Transport and Edge/DC links
  #  origin1 links:
    - endpoints: ["LEAF-E1-1:e1-20", "R1:eth3"]
    - endpoints: ["BORDER-DC:e1-20", "R6:eth3"]
    - endpoints: ["LEAF-E2-1:e1-20", "R7:eth3"]
